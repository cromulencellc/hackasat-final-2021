<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>CFS Housekeeping (HK) Application on  User&apos;s Guide: CFS Housekeeping Operation</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="index.html">CFS Housekeeping Application (HK) User's Guide</a></div>
<h1><a class="anchor" name="cfshkopr">CFS Housekeeping Operation</a></h1>The operational interface of the HK application consists of two commands, two tables and a few telemetry points. The following items detail the operational interface.<p>
<h2>1. The application version number</h2>
<p>
The application version number is displayed in the initialization event and the no-op event. Both events are 'informational' type and are unfiltered by default.<p>
<h2>2. Loading the copy table</h2>
<p>
The copy table is loaded by way of a file. The file must be present when the application starts up. Otherwise, the app will terminate after initialization. The location of the file is specified by the platform configuration parameter named <a class="el" href="hk__platform__cfg_8h.html#d363a25be94649183924265a90d69302">HK_COPY_TABLE_FILENAME</a>. The value of this define specifies the full path as well as the filename.<p>
After initialization, a new copy table may be loaded at any time. The steps to load a new copy table are:<br>
<ul>
<li>Transfer the table file to the on-board file system <br>
</li><li>Send the <a class="elRef" doxygen="cfe.tag:../cfe/" href="../cfe/cfe__tbl__msg_8h.html#9b03cc36b2894db18e00a70c89a1795f">cFE Table load command </a><br>
</li><li>Send the <a class="elRef" doxygen="cfe.tag:../cfe/" href="../cfe/cfe__tbl__msg_8h.html#afeae2981c35e35e8773a8c60b7553c9">cFE Table validate command </a><br>
</li><li>Send the <a class="elRef" doxygen="cfe.tag:../cfe/" href="../cfe/cfe__tbl__msg_8h.html#b3fa1511e81c576198b96de7f10ba397">cFE Table activate command </a><br>
</li></ul>
<p>
The HK application will clean up the items used for the old table (such as SB subscriptions) before updating and processing the new table.<p>
<h2>3. Sending the No-op Command</h2>
<p>
To verify connectivity with the Housekeeping application, the ground may send an <a class="el" href="hk__msgdefs_8h.html#4aaaf68fcc46a34be10ee4eda5616bff">HK No-op command</a>. If the packet length field in the command is set to the value expected by the HK app, then the command counter will increment and a <a class="el" href="">no-op informational event message </a> will be sent. This no-op event will show the version number of the HK application.<p>
<h2>4. Sending the reset counters command</h2>
<p>
The <a class="el" href="hk__msgdefs_8h.html#46f0ca4aa6a39c7dae8cf6630df701f6">reset counters command </a> will reset only the telemetry points listed here: <br>
 a. <a class="el" href="struct_h_k___hk_packet__t.html#51536f413198ecb9616aadb677a8a805">Command counter </a><br>
 b. <a class="el" href="struct_h_k___hk_packet__t.html#6caa874846161f70ba9a7c5b4748036a">Command error counter </a><br>
 c. <a class="el" href="struct_h_k___hk_packet__t.html#13ec0e82e1c3a1ec730ca4be0692eb83">Combined packets sent counter </a><br>
 d. <a class="el" href="struct_h_k___hk_packet__t.html#94934404119555095e342022a5ad3af1">Missing Data counter </a><br>
<p>
<h2>5. Monitoring the command counter</h2>
<p>
The <a class="el" href="struct_h_k___hk_packet__t.html#51536f413198ecb9616aadb677a8a805">command counter </a> will increment only when the HK application receives a valid <a class="el" href="hk__msgdefs_8h.html#4aaaf68fcc46a34be10ee4eda5616bff">HK No-op command</a>.<p>
<h2>6. Monitoring the command error counter</h2>
<p>
The <a class="el" href="struct_h_k___hk_packet__t.html#6caa874846161f70ba9a7c5b4748036a">Command error counter </a> will increment under the following conditions: <br>
 a. Invalid command code <br>
 b. Unexpected packet length field for <a class="el" href="hk__msgids_8h.html#f1d0c701d743a1c9dec8fbb7b9d36141">'Send Combined Tlm' </a> command <br>
 c. Unexpected packet length field for <a class="el" href="hk__msgids_8h.html#8a61ed97e1521ce29e32e3e80197eaf1">'Send HK Housekeeping' </a> command <br>
 d. Unexpected packet length field for <a class="el" href="hk__msgdefs_8h.html#4aaaf68fcc46a34be10ee4eda5616bff">'HK No-op'</a> command <br>
 e. Unexpected packet length field for <a class="el" href="hk__msgdefs_8h.html#46f0ca4aa6a39c7dae8cf6630df701f6">'Reset Counters'</a> command <br>
<p>
<h2>7. Monitoring the 'Combined Packets Sent" counter</h2>
<p>
Each time a <a class="el" href="hk__msgids_8h.html#f1d0c701d743a1c9dec8fbb7b9d36141">'Send Combined Tlm' </a> command is received without error the <a class="el" href="struct_h_k___hk_packet__t.html#13ec0e82e1c3a1ec730ca4be0692eb83">Combined packets sent counter </a> will increment.<p>
<h2>8. Monitoring the 'Missing Data" counter</h2>
<p>
Each time a <a class="el" href="hk__msgids_8h.html#f1d0c701d743a1c9dec8fbb7b9d36141">'Send Combined Tlm' </a> command is received without error, the HK app begins checking the 'Data Present' flag (located in the run-time table) for each of the data sections that make up the output packet. If a data portion is missing, HK sends a debug event (which is filtered by default) and increments the <a class="el" href="struct_h_k___hk_packet__t.html#94934404119555095e342022a5ad3af1">'Missing Data' </a> counter. The event will display the Message ID of the input message that would normally provide the missing portion.<br>
<p>
<b>NOTE:</b> HK will report only one missing data portion in any output message. The <a class="el" href="struct_h_k___hk_packet__t.html#94934404119555095e342022a5ad3af1">'Missing Data' </a> counter will advance by one count (at most) and send one event (at most) for each <a class="el" href="hk__msgids_8h.html#f1d0c701d743a1c9dec8fbb7b9d36141">'Send Combined Tlm' </a> command. <br>
<p>
The HK app will not zero-out or alter the missing data section(s) in any way. The missing data values will match the last 'good' section received.<p>
<h2>9. Using the Memory Pool handle to get mempool stats</h2>
<p>
The HK memory pool is used to allocate the memory needed to store the output packets. Each time a new copy table is processed, the memory for the output packets is dynamically allocated from the memory pool. The memory pool handle is sent down in the <a class="el" href="struct_h_k___hk_packet__t.html">HK housekeeping telemetry packet</a>. It is possible to get statistics from the cFE ES application on the memory pool used by this application. The <a class="elRef" doxygen="cfe.tag:../cfe/" href="../cfe/cfe__es__msg_8h.html#2b1c39432940423ef68c4c183abce3d8">cFE ES command </a> used to get statistics will need this memory pool handle as a command parameter.<p>
Next: <a class="el" href="cfshkreq.html">CFS Housekeeping Requirements</a> <br>
 Prev: <a class="el" href="cfshkovr.html">CFS Housekeeping Overview</a> <hr size="1"><address style="align: right;"><small>Generated on Wed Mar 4 15:17:33 2015 for CFS Housekeeping (HK) Application on  User's Guide by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
