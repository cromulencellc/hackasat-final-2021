<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>CFS Limit Checker Application on  User&apos;s Guide: CFS Limit Checker Operation</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="index.html">CFS Limit Checker (LC) User's Guide</a></div>
<h1><a class="anchor" name="cfslcopr">CFS Limit Checker Operation</a></h1>The CFS Limit Checker has three modes of operation, set by the <a class="el" href="lc__msgdefs_8h.html#e89692a0175dd7fbe39b0cb63ddc1ba9">LC_SET_LC_STATE_CC</a> ground command and echoed in the CurrentLCState housekeeping variable.<p>
Active - Active mode is the normal operation mode. In Active mode, the LC task performs all limit tests defined in the watchpoint definition table and will invoke stored command sequences if the results of watchpoint evaluations trigger an actionpoint condition as defined in the actionpoint definition table.<p>
Passive - In Passive mode, the LC task behaves just like in Active mode except no stored command sequences will be invoked as a result of actionpoint triggers.<p>
Disabled - When disabled, the LC task will perform no watchpoint or actionpoint limit tests.<p>
Watchpoints are evaluated whenever a message containing the telemetry point is received by LC. Watchpoints may evaluate to <a class="el" href="lc__tbldefs_8h.html#460943a8ab1a97e5b296e3b974877abf">LC_WATCH_TRUE</a>, <a class="el" href="lc__tbldefs_8h.html#d3dfc9c5fed52150fb7d7f252cbb5fe3">LC_WATCH_FALSE</a>, LC_WATCH_NOT_MEASURED or <a class="el" href="lc__tbldefs_8h.html#c92b16019803fd9448eab79d1266973c">LC_WATCH_ERROR</a>. Watchpoints can not be individually disabled. The only ways to keep Watchpoints from being evaluated are to squelch the telemetry packet on which they trigger, load a WDT that undefines a Watchpoint or disable the entire LC task.<p>
Actionpoints are evaluated whenever LC receives a message with the <a class="el" href="lc__msgids_8h.html#156d2d4b7fa00933aa4f34253f8dfe74">LC_SAMPLE_AP_MID</a> message ID. This message contains a parameter indicating which actionpoint to evaluate. A single actionpoint can be specified by using the actionpoint ID (0 to <a class="el" href="lc__platform__cfg_8h.html#b49788ed10c3f7f4aaaa876a48b49ba3">LC_MAX_ACTIONPOINTS</a>). All actionpoints can be evaluated by specifying xFFFF as the parameter. There is no way to evaluate multiple actionpoints other than ALL within a single message. An Actionpoint defines a logical relationship between one or more Watchpoint results. This logical relationship is defined in the form of a Reverse Polish Notation (RPN) expression in the actionpoint definition specified in the ADT. The result of this RPN evaluation is either <a class="el" href="lc__tbldefs_8h.html#0d820b4ac78559654a530fca07d3618d">LC_ACTION_PASS</a>, <a class="el" href="lc__tbldefs_8h.html#9b113f330c8222236cf4e92732e024c5">LC_ACTION_FAIL</a>, LC_ACTION_NOT_MEASURED or <a class="el" href="lc__tbldefs_8h.html#69b1f15ea8bd9f62b4f3ea9eab7dcfa6">LC_ACTION_ERROR</a>. In the Actionpoint definition, a maximum number of consecutive fails is specified. If an Actionpoint fails the specified number of times consecutively, LC sends a request to the Stored Command (SC) application to execute a RTS (Relative Time Sequence) of commands as a response to this condition.<p>
Actionpoints can be individually enabled/disabled with the <a class="el" href="lc__msgdefs_8h.html#65ef61d17b6006a1f24bbeb61de06612">LC_SET_AP_STATE_CC</a> ground command. The state of an actionpoint may be set to <a class="el" href="lc__msgdefs_8h.html#8d7d19346c3a24515ee300e89c0fbcf6">LC_APSTATE_ACTIVE</a>, <a class="el" href="lc__msgdefs_8h.html#50c3fd705ae749e6b015d926e4183c54">LC_APSTATE_PASSIVE</a>, or <a class="el" href="lc__msgdefs_8h.html#bebab7aac8a748c086cdf4b74dcdd489">LC_APSTATE_DISABLED</a>. These states operate in the same way as the application operating modes described above. <a class="el" href="lc__msgdefs_8h.html#50c3fd705ae749e6b015d926e4183c54">LC_APSTATE_PASSIVE</a> will just disable RTS requests, while <a class="el" href="lc__msgdefs_8h.html#bebab7aac8a748c086cdf4b74dcdd489">LC_APSTATE_DISABLED</a> will stop evaluation of the actionpoint all together. An additional state <a class="el" href="lc__msgdefs_8h.html#96216b9bd442bbfb94406364260ea711">LC_APSTATE_PERMOFF</a> which functions the same as <a class="el" href="lc__msgdefs_8h.html#bebab7aac8a748c086cdf4b74dcdd489">LC_APSTATE_DISABLED</a> but can only be changed via table load, can be set using the <a class="el" href="lc__msgdefs_8h.html#6a28b576275502e48c64148592cdf132">LC_SET_AP_PERMOFF_CC</a> ground command (see <a class="el" href="cfslcfaqs.html">CFS Limit Checker Frequently Asked Questions</a>).<p>
An example of this watchpoint/actionpoint relationship is shown in the following diagram: <div align="center">
<img src="LC_Monitor_Process.png" alt="LC_Monitor_Process.png">
<p><strong>LC Monitoring Process Example Diagram</strong></p></div>
 <br>
<p>
Since LC is a table driven application, it's behavior is dictated by the contents of the WDT and ADT configuration tables. To change this behavior is simply a matter of loading a new table with modified parameters. LC will check for any pending table updates whenever it processes a housekeeping request. If the table passes validation it will go into effect right away before the next message is read from the software bus. It is not necessary to disable LC before updating a table, however since the watchpoint and actionpoint definitions use two separate tables, careful attention needs to be paid to ensure that the tables are consistent with each other whenever LC is active. For this reason, a mission may choose to always disable LC prior to any table updates and then re-enable monitoring.<p>
When either the WDT or ADT are updated, the corresponding results table (WRT or ART) is reset to initialization values.<p>
Ideally, LC should require no intervention from the ground on a routine basis. Once monitoring is enabled, it will keep processing data and checking for threshold violations (assuming regular scheduler input).<p>
Next: <a class="el" href="cfslcreq.html">CFS Limit Checker Requirements</a> <br>
 Prev: <a class="el" href="cfslcovr.html">CFS Limit Checker Overview</a> <hr size="1"><address style="align: right;"><small>Generated on Wed Mar 4 16:39:54 2015 for CFS Limit Checker Application on  User's Guide by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
