<% 
  require 'osk_config' 

  @APP_PREFIX_STR     = "ADCS"
  @HK_TLM_MID_STR     = "ADCS_TLM_HK_MID"
  @HK_FSW_MID_STR     = "ADCS_TLM_FSW_MID"
  @ANALOG_TLM_MID_STR = "ADCS_HW_ANALOG_TLM_MID"
  @FSS_TLM_MID_STR    = "ADCS_HW_FSS_TLM_MID"
%>
    
TELEMETRY ADCS HK_TLM_PKT <%= Osk::Cfg.processor_endian_adcs %> "ADCS Housekeeping Packet"
  <%= Osk::Cfg.tlm_hdr(@APP_PREFIX_STR, @HK_TLM_MID_STR) %>
  APPEND_ITEM CMD_VALID_COUNT 16 UINT "Valid Command Count"
  APPEND_ITEM CMD_ERROR_COUNT 16 UINT "Error Command Count"
  APPEND_ITEM LAST_TBL_ACTION  8 UINT "Last table action: 1=Register, 2=Load, 3=Dump"
  APPEND_ITEM LAST_TBL_STATUS  8 UINT "Last table action status: 0=Undefined, 1=Invalid, 2=Valid"
  APPEND_ITEM CTRL_EXEC_COUNT 32 UINT "Controller Execution Count"
  APPEND_ITEM CTRL_MODE       16 UINT "Control Mode"
    STATE Init 1
    STATE TBD  2
  APPEND_ITEM CTRL_EXEC_DELAY 16 UINT "Delay Time Miliseconds for ADCS Run-loop"
  APPEND_ITEM HW_EXEC_COUNT 32 UINT "ADCS HW MGR Execution Counter"

TELEMETRY ADCS HK_FSW_TLM_PKT <%= Osk::Cfg.processor_endian_adcs %> "ADCS FSW TLM Packet"
  <%= Osk::Cfg.tlm_hdr(@APP_PREFIX_STR, @HK_FSW_MID_STR) %>

  APPEND_ITEM CTRL_MODE 8 UINT "FSW Controller Mode"
    STATE 0 DISABLED RED
    STATE 1 CLOSED_LOOP_LVLH GREEN
    STATE 2 OPEN_LOOP_WHEEL YELLOW
  APPEND_ITEM ATTITUDE_SOURCE 8 UINT "FSW Attitude Knowledge Source"  
    STATE 0 NONE RED
    STATE 0 RATE_INTEGRATION RED
    STATE 1 TRIAD_SUN_MAG YELLOW
    STATE 2 STAR_TRACKER GREEN
  APPEND_ITEM ATTITUDE_SOURCE_EXE_CNT 16 UINT "Execution Count for Current Attitude Source"
  APPEND_ITEM CTRL_EXE_RESULT 8 UINT "FSW Control Law Execution Result"
  APPEND_ITEM MTR_CTRL_MODE 8 UINT "Magnetic Torque Rod Controller Mode"
    STATE 0 DISABLED
    STATE 1 MANUAL
    STATE 2 AUTO
  APPEND_ITEM ANALOG_TO_DIGITAL_CONVERTER_STATUS 8 UINT "Analog to Digital Converter Hardware State"
    STATE 0 OFF RED
    STATE 1 RUNNING GREEN
  APPEND_ITEM FSS_STATUS 8 UINT "Experimental Fine Sun Sensor Hardware State"
    STATE 0 OFF
    STATE 1 RUNNING
  APPEND_ITEM DEBUG_ENABLED 8 UINT "FSW Debug Enabled State"
    STATE 0 DISABLED
    STATE 1 ENABLED
  APPEND_ITEM INIT 8 UINT "FSW Initilized State"
    STATE 0 INITIALIZED GREEN
    STATE 1 UNITIALIZED RED
  APPEND_ITEM GPS_VALID 8 UINT "GPS State Valid"
    STATE 0 INVALID RED
    STATE 1 VALID GREEN
  APPEND_ITEM ST_VALID 8 UINT "Star Tracker State Valid"
    STATE 0 INVALID RED
    STATE 1 VALID GREEN
  APPEND_ITEM SUN_VALID 8 UINT "Sun Valid"
    STATE 0 INVALID RED
    STATE 1 VALID GREEN
  APPEND_ITEM IMU_STATE_VALID 8 UINT "IMU State Valid"
    STATE 0 INVALID RED
    STATE 1 VALID GREEN
  APPEND_ITEM IMU_STATE_ENABLE 8 UINT "IMU State Enabled"
    STATE 0 INVALID RED
    STATE 1 VALID GREEN
  APPEND_ITEM IMU_GYRO_VALID 8 UINT "IMU Gyro Valid"
    STATE 0 INVALID RED
    STATE 1 VALID GREEN
  APPEND_ITEM IMU_MAG_VALID 8 UINT "IMU Magnetometer Valid"
    STATE 0 INVALID RED
    STATE 1 VALID GREEN
  APPEND_ITEM IMU_ACCEL_VALID 8 UINT "IMU Accelerometer Valid"
    STATE 0 INVALID RED
    STATE 1 VALID GREEN
  APPEND_ITEM FSS_VALID 8 UINT "FSS Sensor Valid"
    STATE 0 INVALID RED
    STATE 1 VALID GREEN
  APPEND_ITEM CTRL_LOOP_ERROR_FLAG 8 UINT "FSW Control Loop Error Flag Set"
    STATE 0 NO_ERROR GREEN
    STATE 1 ERROR RED
  APPEND_ITEM IMU_ERROR_FLAG 8 UINT "FSW IMU Error Flag Set"
    STATE 0 NO_ERROR GREEN
    STATE 1 ERROR RED
  APPEND_ITEM WHEEL_ERROR_FLAG 8 UINT "FSW Wheel Error Flag Set"
    STATE 0 NO_ERROR GREEN
    STATE 1 ERROR RED
  APPEND_ITEM MTR_ERROR_FLAG 8 UINT "FSW Magnetic Torque Rod Error Flag Set"
    STATE 0 NO_ERROR GREEN
    STATE 1 ERROR RED
  APPEND_ITEM ST_ERROR_FLAG 8 UINT "FSW Star-Tracker Error Flag Set"
    STATE 0 NO_ERROR GREEN
    STATE 1 ERROR RED
  APPEND_ITEM GPS_ERROR_FLAG 8 UINT "FSW GPS Error Flag Set"
    STATE 0 NO_ERROR GREEN
    STATE 1 ERROR RED
  APPEND_ITEM 5V_MON_ERROR_FLAG 8 UINT "FSW 5V Monitor Error Flag"
    STATE 0 NONE GREEN
    STATE 1 OVER-VOLTAGE RED
    STATE 2 UNDER-VOLTAGE RED
  APPEND_ITEM 3V3_MON_ERROR_FLAG 8 UINT "FSW 3.3V Monitor Error Flag"
    STATE 0 NONE GREEN
    STATE 1 OVER-VOLTAGE RED
    STATE 2 UNDER-VOLTAGE RED
  APPEND_ITEM SOC_TEMP_MON_ERROR_FLAG 8 UINT "FSW SOC Temp Monitor Error Flag"
    STATE 0 NONE GREEN
    STATE 1 OVER-VOLTAGE RED
    STATE 2 UNDER-VOLTAGE RED
  APPEND_ITEM QBN_X 32 FLOAT "QBN X (Quaternion Body to Inertial)"
  APPEND_ITEM QBN_Y 32 FLOAT "QBN Y (Quaternion Body to Inertial)"
  APPEND_ITEM QBN_Z 32 FLOAT "QBN Z (Quaternion Body to Inertial)"
  APPEND_ITEM QBN_S 32 FLOAT "QBN S (Quaternion Body to Inertial)"
  APPEND_ITEM QBR_X 32 FLOAT "QBR X (Quaternion Body to Target)"
  APPEND_ITEM QBR_Y 32 FLOAT "QBR Y (Quaternion Body to Target)"
  APPEND_ITEM QBR_Z 32 FLOAT "QBR Z (Quaternion Body to Target)"
  APPEND_ITEM QBR_S 32 FLOAT "QBR S (Quaternion Body to Target)"
  APPEND_ITEM QBL_X 32 FLOAT "QBL X (Quaternion Body to LVLH)"
  APPEND_ITEM QBL_Y 32 FLOAT "QBL Y (Quaternion Body to LVLH)"
  APPEND_ITEM QBL_Z 32 FLOAT "QBL Z (Quaternion Body to LVLH)"
  APPEND_ITEM QBL_S 32 FLOAT "QBL S (Quaternion Body to LVLH)"
  APPEND_ITEM QTR_X 32 FLOAT "QTN X (Quaternion Target to Requested)"
  APPEND_ITEM QTR_Y 32 FLOAT "QTN Y (Quaternion Target to Requested)"
  APPEND_ITEM QTR_Z 32 FLOAT "QTN Z (Quaternion Target to Requested)"
  APPEND_ITEM QTR_S 32 FLOAT "QTN S (Quaternion Target to Requested)"
  APPEND_ITEM WBN_X 32 FLOAT "WBN X (Rate Body to Intertial)"
    UNITS RADIANS/SEC rad/s
  APPEND_ITEM WBN_Y 32 FLOAT "WBN Y (Rate Body to Intertial) "
    UNITS RADIANS/SEC rad/s
  APPEND_ITEM WBN_Z 32 FLOAT "WBN Z (Rate Body to Intertial)"
    UNITS RADIANS/SEC rad/s
  APPEND_ITEM WERR_X 32 FLOAT "W_ERROR X (Rate Error Body to Target)"
    UNITS RADIANS/SEC rad/s
    LIMITS DEFAULT 1 ENABLED -0.03490658503988659 -0.017453292519943295 0.017453292519943295 0.03490658503988659
  APPEND_ITEM WERR_Y 32 FLOAT "W_ERROR Y (Rate Error Body to Target)"
    UNITS RADIANS/SEC rad/s
    LIMITS DEFAULT 1 ENABLED -0.03490658503988659 -0.017453292519943295 0.017453292519943295 0.03490658503988659
  APPEND_ITEM WERR_Z 32 FLOAT "W_ERROR Z (Rate Error Body to Target)"
    UNITS RADIANS/SEC rad/s
    LIMITS DEFAULT 1 ENABLED -0.03490658503988659 -0.017453292519943295 0.017453292519943295 0.03490658503988659
  APPEND_ITEM WLN_X 32 FLOAT "WLN X (Rate LVLH to Inertial)"
    UNITS RADIANS/SEC rad/s
  APPEND_ITEM WLN_Y 32 FLOAT "WLN Y"
    UNITS RADIANS/SEC rad/s
  APPEND_ITEM WLN_Z 32 FLOAT "WLN Z"
    UNITS RADIANS/SEC rad/s
  APPEND_ITEM HVB_X 32 FLOAT "HVB X"
    UNITS "Newton*Meter*Seconds" Nms
  APPEND_ITEM HVB_Y 32 FLOAT "HVB Y"
    UNITS "Newton*Meter*Seconds" Nms
  APPEND_ITEM HVB_Z 32 FLOAT "HVB Z"
    UNITS "Newton*Meter*Seconds" Nms
  APPEND_ITEM SVB_X 32 FLOAT "SVB X (Sun Vector in Body)"
  APPEND_ITEM SVB_Y 32 FLOAT "SVB Y (Sun Vector in Body)"
  APPEND_ITEM SVB_Z 32 FLOAT "SVB Z (Sun Vector in Body)"
  APPEND_ITEM ACC_X 32 FLOAT "ACC X"
    UNITS "meters/sec^2" "m/s^2"
  APPEND_ITEM ACC_Y 32 FLOAT "ACC Y"
    UNITS "meters/sec^2" "m/s^2"
  APPEND_ITEM ACC_Z 32 FLOAT "ACC Z"
    UNITS "meters/sec^2" "m/s^2"
  APPEND_ITEM BVB_X 32 FLOAT "BVB X"
    UNITS Tesla T
  APPEND_ITEM BVB_Y 32 FLOAT "BVB Y"
    UNITS Tesla T
  APPEND_ITEM BVB_Z 32 FLOAT "BVB Z"
    UNITS Tesla T
  APPEND_ITEM WHEEL_W_X 32 FLOAT "WHEEL SPEED X"
    UNITS RPM rpm 
    POLY_READ_CONVERSION 0 9.549296585513721
    LIMITS DEFAULT 1 ENABLED -6000 -5000 5000 6000
  APPEND_ITEM WHEEL_W_Y 32 FLOAT "WHEEL SPEED Y"
    UNITS RPM rpm 
    POLY_READ_CONVERSION 0 9.549296585513721
    LIMITS DEFAULT 1 ENABLED -6000 -5000 5000 6000
  APPEND_ITEM WHEEL_W_Z 32 FLOAT "WHEEL SPEED Z"
    UNITS RPM rpm 
    POLY_READ_CONVERSION 0 9.549296585513721
    LIMITS DEFAULT 1 ENABLED -6000 -5000 5000 6000
  APPEND_ITEM WHEEL_TCMD_X 32 FLOAT "WHEEL Torque Cmd X"
    UNITS Milinewtons mN
    POLY_READ_CONVERSION 0 1000
  APPEND_ITEM WHEEL_TCMD_Y 32 FLOAT "WHEEL Torque Cmd Y"
    UNITS Milinewtons mN
    POLY_READ_CONVERSION 0 1000
  APPEND_ITEM WHEEL_TCMD_Z 32 FLOAT "WHEEL Torque Cmd Z"
    UNITS Milinewtons mN
    POLY_READ_CONVERSION 0 1000
  APPEND_ITEM WHEEL_SPEED_CMD_X 32 FLOAT "WHEEL Speed Cmd X"
    UNITS RPM rpm 
    POLY_READ_CONVERSION 0 9.549296585513721
    LIMITS DEFAULT 1 ENABLED -6000 -5000 5000 6000
  APPEND_ITEM WHEEL_SPEED_CMD_Y 32 FLOAT "WHEEL Speed Cmd Y"
    UNITS RPM rpm 
    POLY_READ_CONVERSION 0 9.549296585513721
    LIMITS DEFAULT 1 ENABLED -6000 -5000 5000 6000
  APPEND_ITEM WHEEL_SPEED_CMD_Z 32 FLOAT "WHEEL Speed Cmd Z"
    UNITS RPM rpm 
    POLY_READ_CONVERSION 0 9.549296585513721
    LIMITS DEFAULT 1 ENABLED -6000 -5000 5000 6000
  APPEND_ITEM WHEEL_H_X 32 FLOAT "WHEEL Momemtum X"
    UNITS "Newton*Meter*Seconds" Nms
    LIMITS DEFAULT 1 ENABLED -0.028 -0.022 0.022 0.028
  APPEND_ITEM WHEEL_H_Y 32 FLOAT "WHEEL Momemtum Y"
    UNITS "Newton*Meter*Seconds" Nms
    LIMITS DEFAULT 1 ENABLED -0.028 -0.022 0.022 0.028
  APPEND_ITEM WHEEL_H_Z 32 FLOAT "WHEEL Momemtum Z"
    UNITS "Newton*Meter*Seconds" Nms
    LIMITS DEFAULT 1 ENABLED -0.028 -0.022 0.022 0.028

  APPEND_ITEM MTR_CMD_X 32 FLOAT "MTR Cmd X"
  APPEND_ITEM MTR_CMD_Y 32 FLOAT "MTR Cmd Y"
  APPEND_ITEM MTR_CMD_Z 32 FLOAT "MTR Cmd Z"
  APPEND_ITEM VOLTAGE_MONITOR_5V 32 FLOAT "5V Monitor"
    UNITS Volts V
    LIMITS DEFAULT 1 ENABLED 4.7 4.8 5.1 5.2
  APPEND_ITEM VOLTAGE_MONITOR_3V3 32 FLOAT "3.3V Monitor"
    UNITS Volts V
    LIMITS DEFAULT 1 ENABLED 3.0 3.1 3.4 3.5
  APPEND_ITEM TEMP_MONITOR_SOC 32 FLOAT "SOC Temp Monitor"
    UNITS Celsius C
    LIMITS DEFAULT 1 ENABLED 10.0 20.0 40 50
  APPEND_ITEM CSS_ILLUM_YAW_0 32 FLOAT "CSS YAW 0 Illumination"
  APPEND_ITEM CSS_ILLUM_YAW_90 32 FLOAT "CSS YAW 90 Illumination"
  APPEND_ITEM CSS_ILLUM_YAW_180 32 FLOAT "CSS YAW 180 Illumination"
  APPEND_ITEM CSS_ILLUM_YAW_270 32 FLOAT "CSS YAW 270 Illumination"
  APPEND_ITEM CSS_ILLUM_Z_N 32 FLOAT "CSS Negative Z Illumination"
  APPEND_ITEM CSS_ILLUM_Z 32 FLOAT "CSS Z Illumination"
  APPEND_ITEM FSS_SUN_ANG_X   32 FLOAT "FSS X Axis Sun Angle"
    UNITS "Degrees" deg
    POLY_READ_CONVERSION 0 57.29577951308232
  APPEND_ITEM FSS_SUN_ANG_Y   32 FLOAT "FSS Y Axis Sun Angle"
    UNITS "Degrees" deg
    POLY_READ_CONVERSION 0 57.29577951308232
  APPEND_ITEM WHEEL_SPEED_CMD_COUNT 32 UINT "WHEEL Z SPEED CMD COUNTER"
  APPEND_ITEM KUNL 32 FLOAT "Kunl Magnetic Gain Parameter"
  APPEND_ITEM VMAX 32 FLOAT "Controller max slew rate"
    UNITS "Degrees/s" deg/s
    POLY_READ_CONVERSION 0 57.29577951308232
  APPEND_ITEM AMAX 32 FLOAT "Controller max acceleration"
    UNITS "Degrees/s/s" deg/s/s
    POLY_READ_CONVERSION 0 57.29577951308232
  APPEND_ITEM WC 32 FLOAT "Controller period Wc"
  APPEND_ITEM IXX 32 FLOAT "Ixx Intertia Term"
    UNITS "Kg*m^s" "Kg*m^s"
  APPEND_ITEM IYY 32 FLOAT "Iyy Intertia Term"
    UNITS "Kg*m^s" "Kg*m^s"
  APPEND_ITEM IZZ 32 FLOAT "Izz Intertia Term"
    UNITS "Kg*m^s" "Kg*m^s"
  APPEND_ITEM CTRL_EXE_J2000_TIME 64 FLOAT "FSW Control Time J200 Seconds"
  APPEND_ITEM CTRL_EXE_CFS_TIME 64 FLOAT "Last Control Loop Execution Time Start"
    UNITS Seconds s

TELEMETRY ADCS ANALOG_HW_SENSOR_PKT <%= Osk::Cfg.processor_endian_adcs %> "ADCS Analog TLM Sensor Packet"
  <%= Osk::Cfg.tlm_hdr(@APP_PREFIX_STR, @ANALOG_TLM_MID_STR) %>
  APPEND_ITEM STATUS 8 UINT "XADC Hardware Status"
    STATE UNITIALIZED 0
    STATE INITIALIZED 1
    STATE RUNNING 2
    STATE STOPPED 3
    STATE ERROR 4
  APPEND_ITEM INITIALIZED 8 UINT "XADC Hardware Initilized Status"
    STATE FALSE 0
    STATE TRUE 1
  APPEND_ITEM ERROR_FLAG 8 UINT "XADC Harware Error Flag"
  APPEND_ITEM RESET_COUNT 16 UINT "XADC Hardare Device Reset Counter"
  APPEND_ITEM UPDATE_COUNT 32 UINT "XADC Hardware Device Update Counter"
  APPEND_ITEM ANALOG_VOLTAGE_13_ID 8 UINT "XADC 5V Monitor ID"
  APPEND_ITEM ANALOG_VOLTAGE_13_RAW 16 UINT "XADC 5V Monitor Raw"
  APPEND_ITEM ANALOG_VOLTAGE_13_VAL 64 FLOAT "XADC 5V Monitor Converted"
    UNITS "mili-volts" "mV"
  APPEND_ITEM ANALOG_VOLTAGE_14_ID 8 UINT "XADC 3.3V Monitor ID"
  APPEND_ITEM ANALOG_VOLTAGE_14_RAW 16 UINT "XADC 3.3V Monitor Raw"
  APPEND_ITEM ANALOG_VOLTAGE_14_VAL 64 FLOAT "XADC 3.3V Monitor Converted"
    UNITS "mili-volts" "mV"
  APPEND_ITEM ANALOG_TEMP_0_ID 8 UINT "XADC ZYNC Processor Temp ID"
  APPEND_ITEM ANALOG_TEMP_0_ID_RAW 16 UINT "XADC ZYNC Processor Temp Raw"
  APPEND_ITEM ANALOG_TEMP_0_ID_VAL 64 FLOAT "XADC ZYNC Processor Temp Converted"
    UNITS "degrees celsius" "C"
    POLY_READ_CONVERSION 0 0.001

TELEMETRY ADCS FSS_HW_SENSOR_PKT <%= Osk::Cfg.processor_endian_adcs %> "ADCS FineSunSensor TLM Sensor Packet"
  <%= Osk::Cfg.tlm_hdr(@APP_PREFIX_STR, @FSS_TLM_MID_STR) %>
  APPEND_ITEM STATUS 8 UINT "FSS Hardware Status"
    STATE UNITIALIZED 0
    STATE INITIALIZED 1
    STATE RUNNING 2
    STATE STOPPED 3
    STATE ERROR 4
  APPEND_ITEM INITIALIZED 8 UINT "FSS Hardware Initilized Status"
    STATE FALSE 0
    STATE TRUE 1
  APPEND_ITEM ERROR_FLAG 8 UINT "FSS Harware Error Flag"
  APPEND_ITEM RESET_COUNT 16 UINT "FSS Hardare Device Reset Counter"
  APPEND_ITEM UPDATE_COUNT 32 UINT "FSS Hardware Device Update Counter"
  APPEND_ITEM FSS_SUN_ANG_X 8 UINT "FSS Sun Sensor Valid"
    STATE 0 INVALID RED
    STATE 1 VALID GREEN
  APPEND_ITEM FSS_SUN_ANG_X   32 FLOAT "FSS X Axis Sun Angle"
  APPEND_ITEM FSS_SUN_ANG_Y   32 FLOAT "FSS Y Axis Sun Angle"
  APPEND_ITEM FSS_SUN_VEC_S_X 32 FLOAT "FSS X Axis Sun Vector S"
  APPEND_ITEM FSS_SUN_VEC_S_Y 32 FLOAT "FSS Y Axis Sun Vector S"
  APPEND_ITEM FSS_SUN_VEC_S_Z 32 FLOAT "FSS Z Axis Sun Vector S"
  APPEND_ITEM FSS_SUN_VEC_B_X 32 FLOAT "FSS X Axis Sun Vector B" 
  APPEND_ITEM FSS_SUN_VEC_B_Y 32 FLOAT "FSS Y Axis Sun Vector B"
  APPEND_ITEM FSS_SUN_VEC_B_Z 32 FLOAT "FSS Z Axis Sun Vector B"
  APPEND_ITEM FSS_CAL_X       32 FLOAT "FSS X Calibration"
  APPEND_ITEM FSS_CAL_Y       32 FLOAT "FSS Y Calibration"
  APPEND_ITEM FSS_CAL_Z       32 FLOAT "FSS Z Calibration"
  APPEND_ITEM FSS_CAL_TYPE     8 UINT  "FSS Calibration Type"
    STATE SCALAR 0
    STATE DISPLACEMENT 1