<% 
  require 'osk_config' 

  @APP_PREFIX_STR = "PDB"
  @HK_TLM_MID_STR = "PDB_HK_TLM_MID"
  @CHARGER_TLM_MID_STR = "PDB_CHARGER_TLM_MID"
%>

TELEMETRY PDB HK_TLM_PKT <%= Osk::Cfg.processor_endian_pdb %> "PDB App"
  <%= Osk::Cfg.tlm_hdr(@APP_PREFIX_STR, @HK_TLM_MID_STR) %>
  APPEND_ITEM CMD_VALID_COUNT 32 UINT "Count of valid commands received since startup or the last reset counter command"
  APPEND_ITEM CMD_ERROR_COUNT 32 UINT "Count of invalid commands received since startup or the last reset counter command"
  APPEND_ITEM EXOBJ_EXEC_CNT  32 UINT "Count of example object executions"
  APPEND_ITEM CHANNEL_1_STATE  8 UINT "5V Channel 1 State Set"
    STATE ON 1
    STATE OFF 0
  APPEND_ITEM CHANNEL_2_STATE  8 UINT "5V Channel 2 State Set"
    STATE ON 1
    STATE OFF 0
  APPEND_ITEM CHANNEL_3_STATE  8 UINT "5V Channel 3 State Set"
    STATE ON 1
    STATE OFF 0
  APPEND_ITEM CHANNEL_4_STATE  8 UINT "5V Channel 4 State Set"
    STATE ON 1
    STATE OFF 0
  APPEND_ITEM CHANNEL_5_STATE  8 UINT "5V Channel 5 State Set"
    STATE ON 1
    STATE OFF 0
  APPEND_ITEM CHANNEL_6_STATE  8 UINT "5V Channel 6 State Set"
    STATE ON 1
    STATE OFF 0
  APPEND_ITEM CHANNEL_1_STATE_ACTUAL  8 UINT "5V Channel 1 State Read"
    STATE ON 1
    STATE OFF 0
  APPEND_ITEM CHANNEL_2_STATE_ACTUAL  8 UINT "5V Channel 2 State Read"
    STATE ON 1
    STATE OFF 0
  APPEND_ITEM CHANNEL_3_STATE_ACTUAL  8 UINT "5V Channel 3 State Read"
    STATE ON 1
    STATE OFF 0
  APPEND_ITEM CHANNEL_4_STATE_ACTUAL  8 UINT "5V Channel 4 State Read"
    STATE ON 1
    STATE OFF 0
  APPEND_ITEM CHANNEL_5_STATE_ACTUAL  8 UINT "5V Channel 5 State Read"
    STATE ON 1
    STATE OFF 0
  APPEND_ITEM CHANNEL_6_STATE_ACTUAL  8 UINT "5V Channel 6 State Read"
    STATE ON 1
    STATE OFF 0
  APPEND_ITEM CHANNEL_1_VOLTAGE 16 UINT "5V Channel 1 Analog Voltage Sensor"
    POLY_READ_CONVERSION 0 0.0064516129032258064
  APPEND_ITEM CHANNEL_2_VOLTAGE 16 UINT "5V Channel 2 Analog Voltage Sensor"
    POLY_READ_CONVERSION 0 0.0064516129032258064
  APPEND_ITEM CHANNEL_3_VOLTAGE 16 UINT "5V Channel 3 Analog Voltage Sensor"
    POLY_READ_CONVERSION 0 0.0064516129032258064
  APPEND_ITEM CHANNEL_4_VOLTAGE 16 UINT "5V Channel 4 Analog Voltage Sensor"
    POLY_READ_CONVERSION 0 0.0064516129032258064
  APPEND_ITEM CHANNEL_5_VOLTAGE 16 UINT "5V Channel 5 Analog Voltage Sensor"
    POLY_READ_CONVERSION 0 0.0064516129032258064
  APPEND_ITEM CHANNEL_6_VOLTAGE 16 UINT "5V Channel 6 Analog Voltage Sensor"
    POLY_READ_CONVERSION 0 0.0064516129032258064
  APPEND_ITEM VDD_3V3 16 UINT "3.3V VDD Analog Voltage Sensor"
    POLY_READ_CONVERSION 0 0.0064516129032258064
  APPEND_ITEM CHANNEL_1_CURRENT 16 UINT "5V Channel 1 Analog Current Sensor"
    POLY_READ_CONVERSION 0 0.0064516129032258064
  APPEND_ITEM CHANNEL_2_CURRENT 16 UINT "5V Channel 2 Analog Current Sensor"
    POLY_READ_CONVERSION 0 0.0064516129032258064
  APPEND_ITEM CHANNEL_3_CURRENT 16 UINT "5V Channel 3 Analog Current Sensor"
    POLY_READ_CONVERSION 0 0.0064516129032258064
  APPEND_ITEM CHANNEL_4_CURRENT 16 UINT "5V Channel 4 Analog Current Sensor"
    POLY_READ_CONVERSION 0 0.0064516129032258064
  APPEND_ITEM CHANNEL_5_CURRENT 16 UINT "5V Channel 5 Analog Current Sensor"
    POLY_READ_CONVERSION 0 0.0064516129032258064
  APPEND_ITEM CHANNEL_6_CURRENT 16 UINT "5V Channel 6 Analog Current Sensor"
    POLY_READ_CONVERSION 0 0.0064516129032258064 
  APPEND_ITEM V_BUS_ANALOG 16 UINT "V_BUS Analog Voltage Sensor"
    POLY_READ_CONVERSION 0 0.0325510237296963
  APPEND_ITEM V_SYS_ANALOG 16 UINT "V_SYS Analog Voltage Sensor"
    POLY_READ_CONVERSION 0 0.0325510237296963
  APPEND_ITEM V_BAT_ANALOG 16 UINT "V_BAT Analog Voltage Sensor"
    POLY_READ_CONVERSION 0 0.0325510237296963
  APPEND_ITEM VDD_1_5V_ANALOG 16 UINT "Regulator 1 5V VDD Analog Voltage Sensor"
    POLY_READ_CONVERSION 0 0.0064516129032258064
  APPEND_ITEM VDD_2_5V_ANALOG 16 UINT "Regulator 2 5V VDD Analog Voltage Sensor"
    POLY_READ_CONVERSION 0 0.0064516129032258064
  APPEND_ITEM V_SP_ANALOG 16 UINT "V_SP Analog Voltage Sensor"
    POLY_READ_CONVERSION 0 0.0325510237296963



TELEMETRY PDB CHARGER_TLM_PKT <%= Osk::Cfg.processor_endian_pdb %> "PDB Charger Status"
  <%= Osk::Cfg.tlm_hdr(@APP_PREFIX_STR, @CHARGER_TLM_MID_STR) %>
  APPEND_ITEM CHARGER_ENABLED  8 UINT "Charger enabled/disabled state (SW1)"
    STATE DISABLED 0
    STATE ENABLED 1
  APPEND_ITEM MAX_CHARGE_VOLTAGE 16 UINT "Configured Max Charge Voltage"
    UNITS Millivolts mV
  APPEND_ITEM MAX_CHARGE_CURRENT 16 UINT "Configured Max Charge Current"
    UNITS Milliamps mA
  APPEND_ITEM SYSTEM_POWER_USAGE 16 UINT "System Power Utilization"
    UNITS Watts W
  APPEND_ITEM VBUS 16 UINT "VBUS"
    UNITS Millivolts mV
  APPEND_ITEM VBAT 16 UINT "VBAT"
    UNITS Millivolts mV
  APPEND_ITEM VSYS 16 UINT "VSYS"
    UNITS Millivolts mV
  APPEND_ITEM ACTUAL_CHARGE_CURRENT 16 UINT "Charge Current"
    UNITS Milliamps mA
  APPEND_ITEM ACTUAL_DISCHARGE_CURRENT 16 UINT "Discharge Current"
    UNITS Milliamps mA

