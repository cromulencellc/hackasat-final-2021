###############################################################################
# cFE Time Service Screen
#
# License:
#   Written by David McComas, licensed under the copyleft GNU General Public
#   License (GPL).
#
###############################################################################

SCREEN AUTO AUTO 0.5
GLOBAL_SETTING BUTTON BACKCOLOR 112 199 204
GLOBAL_SETTING BUTTON TEXTCOLOR black

TITLE "cFE Time Service"
  SETTING BACKCOLOR 254 156 255
  SETTING TEXTCOLOR black

VERTICALBOX "Ground Interface"
  SETTING BACKCOLOR black
  SETTING TEXTCOLOR white   
  MATRIXBYCOLUMNS 3 5
         
    BUTTON 'Send Cmd' 'require "#{Cosmos::USERPATH}/config/targets/CFE_TIME/lib/cfe_time_screen.rb"; cfe_time_scr_cmd(self, "CMD")'
    NAMED_WIDGET cmd COMBOBOX NOOP RESET_CTRS SEND_DIAG SET_SOURCE SET_STATE ADD_CLOCK_LAT SUB_CLOCK_LAT SET_CLOCK SET_CLOCK_MET SET_CLOCK_STCF SET_CLOCK_LEAP ADD_STCF_ADJ SUB_STCF_ADJ ADD_1HZ_STCF_ADJ SUB_1HZ_STCF_ADJ SET_SIGNAL 
    LABEL "    "
    
    BUTTON 'Display Tlm' 'require "#{Cosmos::USERPATH}/config/targets/CFE_TIME/lib/cfe_time_screen.rb"; cfe_time_scr_cmd(self, "TLM")'
    NAMED_WIDGET tlm COMBOBOX DIAGNOSTICS
    LABEL "    "

  END # Matrix
END # Vertical
  
VERTICALBOX "Learn"
  SETTING BACKCOLOR black
  SETTING TEXTCOLOR white   
  MATRIXBYCOLUMNS 3 5

    NAMED_WIDGET tutorial COMBOBOX CFE_TRAINING_SLIDES CFE_EXERCISE_SLIDES
    LABEL "    "

  END # Matrix
END # Vertical


VERTICALBOX "Status"
  SETTING BACKCOLOR 255 249 133
  SETTING TEXTCOLOR black 
  MATRIXBYCOLUMNS 4 15
   
      LABEL "Cmd Valid Cnt"
      VALUE CFE_TIME HK_TLM_PKT CMD_VALID_COUNT WITH_UNITS 8
      LABEL "Cmd Error Cnt"
      VALUE CFE_TIME HK_TLM_PKT CMD_ERROR_COUNT WITH_UNITS 8

      LABEL "Clk State"
      VALUE CFE_TIME  HK_TLM_PKT CLOCK_STATE_FLAGS WITH_UNITS 8
      LABEL "API State"
      VALUE CFE_TIME HK_TLM_PKT CLOCK_STATE_API WITH_UNITS 8
      LABEL "Leap Secs"
      
      VALUE CFE_TIME HK_TLM_PKT LEAP_SECONDS WITH_UNITS 8
      LABEL "1Hz Adj Secs"
      VALUE CFE_TIME HK_TLM_PKT 1HZADJ_SECONDS WITH_UNITS 8

      LABEL "Pkt Time"
      VALUE CFE_TIME HK_TLM_PKT CCSDS_SECONDS WITH_UNITS 8
      LABEL "MET Secs"
      VALUE CFE_TIME HK_TLM_PKT MET_SECONDS WITH_UNITS 8
      
      LABEL "STCF Secs"
      VALUE CFE_TIME HK_TLM_PKT STCF_SECONDS WITH_UNITS 8

  End # Matrix
END # Horizontal

HORIZONTALLINE
LABEL "Flight Event Messages"
NAMED_WIDGET evs_msg_t TEXTBOX CFE_EVS EVENT_MSG_PKT MESSAGE 512 50
